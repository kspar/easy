<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lahendus</title>
    <link rel="stylesheet" href="css/pace.css" />
    <style>
      body {
        margin: 1rem;
        padding: 3rem;
      }
      .tabs {
        list-style-type: none;
        padding: 0;
        margin: 0;
        margin-bottom: -1px;
      }
      .tab {
        padding: 5px 10px;
        background: #ddd;
        border: 1px solid #bbb;
        width: fit-content;
        display: inline-block;
      }
      .tab.active {
        background: #fff;
        border-bottom-color: white !important;
      }

      .tab-pane {
        display: none;
        border: 1px solid #bbb;
      }
      .tab-pane.active {
        display: block;
      }

    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:400,500|Sniglet&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css"
      integrity="sha512-uf06llspW44/LZpHzHT6qBOIVODjWtv4MxCricRxkzvopAlSWnTf6hpZTFxuuZcuNE9CBQhqE0Seu1CoRk84nQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"
      integrity="sha512-8RnEqURPUc5aqFEN04aQEiPlSAdE0jlFS/9iGgUyNtwFnSKCXhmB6ZTNl7LnDtDWKabJIASzXrzD0K+LYexU9g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/meta.min.js"
      integrity="sha512-/2x+sfL5ERHfoViXm/UncFBzaD54f2bkjEui6w2IheEUafG2gcHJv3gQ4VDIqNr+LuApQwpnsjjrEMXI43nPzg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"
      integrity="sha512-2M0GdbU5OxkGYMhakED69bw0c1pW3Nb0PeF3+9d+SnwN1ryPx3wiDdNqK3gSM7KAU/pEV+2tFJFbMKjKAahOkQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"
      integrity="sha512-I6CdJdruzGtvDyvdO4YsiAq+pkWf2efgd1ZUSK2FnM/u2VuRASPC7GowWQrWyjxCZn6CT89s3ddGI+be0Ak9Fg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/htmlembedded/htmlembedded.min.js"
      integrity="sha512-nZlYJlXg6ZqhEdMELUCY9QpeUZHLZh9JUUe2wnHmEvFSWer2gxmDO4xeQ4QlRM1zMzeZsTdm5oFw2IGhsmmLlA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/htmlmixed/htmlmixed.min.js"
      integrity="sha512-HN6cn6mIWeFJFwRN9yetDAMSh+AK9myHF1X9GlSlKmThaat65342Yw8wL7ITuaJnPioG0SYG09gy0qd5+s777w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/jsx/jsx.min.js"
      integrity="sha512-+0Bk5jqcZFYMi5WaRZaTboF7s25sht/1pxmg3sXqWDeidrrw1yRqDzF25jsMOnToR8iXSqzrHfAD5wiDO1lwSA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/sql/sql.min.js"
      integrity="sha512-JOURLWZEM9blfKvYn1pKWvUZJeFwrkn77cQLJOS6M/7MVIRdPacZGNm2ij5xtDV/fpuhorOswIiJF3x/woe5fw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/meta.min.js"
      integrity="sha512-/2x+sfL5ERHfoViXm/UncFBzaD54f2bkjEui6w2IheEUafG2gcHJv3gQ4VDIqNr+LuApQwpnsjjrEMXI43nPzg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- Add here more languages from: https://cdnjs.com/libraries/codemirror -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/merge/merge.min.css"
      integrity="sha512-4ZFb0fWFyvDx41W+EjvXqlZ3462tmHKrDmpNPAzAtut+NlsyNZQ0TvZMG6g0PvXbqUQ+OCyUuu9Khz5GBhZuAw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/merge/merge.min.js"
      integrity="sha512-FiwevACjxW8T+ovcQyRIPpR0fHMFcjlGlMC6cn38AGyzW4aDlAzSarcZU0pKdAOMNzD44LepIbUiq8rTqxQ+zw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/diff-match-patch/1.0.5/index.js"
      integrity="sha512-Tlwo4f73Gi/8rJinnJUJHsGaGDjU+RAw90XsYzSBf7XIGNlBKQwbj44ew9f5m2Zybp345RbYyRcFRJvvsLMmdg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/cobalt.min.css"
      integrity="sha512-dAYwzcmdv0GvCo9UJmVP430Mc9kmvpdDVk/pHNG90qTZR6tpHQlR9BsVdK9ZGpnNtQNVl+j7UQppCwOPN0TTNQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/exercise.css" />

  </head>
  <body class="leftbar-active rightbar-active">
    <h1>Code Mirror</h1>
    <div id="codemirror">
      <h3>Siin on näide kasutades Cobalt theme:</h3>
      <div id="codemirrordiv"></div>
      <h3>Siin on näide kasutades merge view:</h3>
      <div id="mergeviewdiv"></div>
      <h3>Siin on näide kasutades ühe realine editor:</h3>
      <div id="onelinediv"></div>
    </div>
    <h3>Tab example</h3>
    <div class="tabs-container">
      <ul class="tabs">
        <li class="tab active" data-tab="0">One</li>
        <li class="tab" data-tab="1">Two</li>
      </ul>
      <div class="tab-pane active" data-pane="0">
        <textarea class="editor">
// here is the first one
var editor = CodeMirror.fromTextArea(document.getElementById('editor'), {
    mode: "javascript",
    lineNumbers: true,
});
editor.save()</textarea
        >
      </div>
      <div class="tab-pane active" data-pane="1">
        <textarea class="editor">
// here is the second one
def function(x):
  return x**2
  </textarea
        >
      </div>
    </div>

    <header></header>
    <main></main>
    <footer></footer>

    <script>
      const codeMirrorInstance = new CodeMirror(
              document.querySelector("#codemirrordiv"),
              {
                lineNumbers: true,
                tabSize: 4,
                value: 'def function():\n\tprint("Hello, World")',
                mode: "python",
                theme: "cobalt",
                allowDropFileTypes: ["text/plain", "text/x-python"],
              }
      );

      let doc = `def function():
  for i in range(10):
    print("Hello, World")`;
      let doc_muudatud =
              doc.replace(/10/g, "22") + "\nsome_variable = 5\nprint(some_variable)";

      let view = new CodeMirror.MergeView(document.querySelector("#mergeviewdiv"), {
        origLeft: doc,
        value: doc_muudatud,
        mode: "python",
        // Kui tahta lisada 3. võrdlust, siis tuleb lisada origRight
        // origRight: doc_muudatud,
        // revertButtons: true,
        // showDifferences: true,
        // collapseIdentical: true,
        // connect: "align",
        // allowEditingOriginals: true,
        // ignoreWhitespace: true,
        // syntaxHighlightDeletions: true,
        // gutter: true,
        // lineNumbers: true,
        // addModeClass: true,
        // spellcheck: true,
        // lineWrapping: true,
        // indentWithTabs: true,
        // rtlMoveVisually: true,
        // theme: "cobalt",
      });


      // Oneline editor:
      const oneLineInstance = new CodeMirror(document.querySelector("#onelinediv"), {
        lineNumbers: false,
        tabSize: 2,
        value: "",
        mode: "text",
      });

      oneLineInstance.setSize(400, oneLineInstance.defaultTextHeight() + 3 * 4);
      // 200 is the preferable width of text field in pixels,
      // 4 is default CM padding (which depends on the theme you're using)

      // now disallow adding newlines in the following simple way
      oneLineInstance.on("beforeChange", function (instance, change) {
        var newtext = change.text.join("").replace(/\n/g, ""); // remove ALL \n !
        change.update(change.from, change.to, [newtext]);
        return true;
      });


      // Tabs example

      var editors = document.getElementsByClassName("editor");
      for (var i = 0; i < editors.length; i++) {
        var self = editors[i];
        var editor = new CodeMirror.fromTextArea(self, {
          mode: i ? "python" : "javascript",
          lineNumbers: true,
          autoRefresh: true,
        });
        editor.save();
      }

      var tabs = document.querySelectorAll(".tab");
      document
              .querySelectorAll('.tab-pane[data-pane="1"]')[0]
              .classList.remove("active");
      for (var i = 0; i < tabs.length; i++) {
        var self = tabs[i];
        self.addEventListener("click", function () {
          var data = this.getAttribute("data-tab");
          document.querySelectorAll(".tab-pane.active")[0].classList.remove("active");
          document
                  .querySelectorAll('.tab-pane[data-pane="' + data + '"]')[0]
                  .classList.add("active");
          document.querySelectorAll(".tab.active")[0].classList.remove("active");
          this.classList.add("active");
        });
      }

    </script>
  </body>
</html>
