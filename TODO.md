# TODOs / Proposals

- **Course code as secondary text**: Add a `course_code` field to courses (DB + backend services) and display it as secondary text under the course title in the courses list. Currently alias overwrites the title; a dedicated code field would allow showing both.
- ~~**Persistent course color**: Save course accent color in DB so it remains consistent across title changes. Currently derived from title hash. Allow admin to set color when creating a course and change it in course settings.~~ ✅
- **Single-course auto-redirect**: For all roles, if the user has only one course, skip the courses list and redirect straight to that course's exercises page. The courses list is pointless when there's only one entry. (Old WUI does this — check for reference.)
- **Auto-assessment visibility scheduling** (`auto_assessments_visible_from`): Replace the current boolean `assessments_student_visible` on `course_exercise` with a nullable timestamp `auto_assessments_visible_from`. When set, auto-assessment results (grade + OK_V3 feedback) are hidden from students until that time. Enables scheduling auto-feedback release after a deadline without changing the submission close time. Backend enforces this by suppressing `auto_assessment` in student submission responses when `now() < auto_assessments_visible_from`. The current `assessments_student_visible` boolean is not enforced anywhere and should be removed or replaced.
- **Course templates**: A template defines a reusable course skeleton — a list of exercises with their `course_exercise` configuration (thresholds, deadlines, ordering, title aliases, instructions, etc.). Teachers can create a new course from a template as a quickstart instead of adding exercises one by one. Standard/official templates can be maintained centrally. Currently this is handled by CLI scripts that call core services directly; a proper template system would expose this through the UI and API. Design decisions: stored in DB, applying a template is a one-time copy (no live link), exercises are added at their latest version at the time of applying.
- **Exercise sections / grouping**: For courses with many exercises (50+), a flat list becomes hard to navigate. Allow teachers to define named sections (e.g. "Week 1", "Lists and Loops") and assign exercises to them. Students see the list grouped by section, with each section collapsible. Needs a new `course_exercise_section` table (id, course_id, title, ordering_index) and a nullable `section_id` FK on `course_exercise`. Teachers can create/rename/reorder sections and drag exercises between them in the course settings UI.
- **Grade table: link grade cells to student submission**: Clicking a grade cell in the grade table should navigate to the teacher's view of that student's submission for that exercise. Requires the teacher submission/grading page to be implemented first.
- **Landing page i18n**: Translate the landing page (`/landing`) to Estonian after the content is finalised with all features. Currently all text is hardcoded in English.
- **Celebration animation for 100% autograde**: When a student gets a perfect score (100/100) from the autograde, play a celebration animation (confetti, fireworks, or similar) after the test results are revealed. Could trigger at the end of the typewriter reveal in `AutoTestResults` or after the grade banner updates.
- **Autograde animation persists on exercise switch**: When a student submits on an auto-graded exercise and navigates to another exercise before the autograde finishes, the animation continues on the new exercise's view. It does finish correctly and the UI recovers, but the animation visually belongs to the previous exercise. The root cause is that `SubmitTab`'s `useMutation` instances (`useSubmitSolution`, `useAwaitAutograde`) retain their pending/success state across re-renders when `courseExerciseId` changes (same component instance, `useMutation` has no key). Attempts to fix with `key` remounting, synchronous `setState` during render, and `mutation.reset()` during render all caused worse regressions (broken navigation, multi-second delays, infinite loops). A proper fix likely needs either: (a) restructuring mutations so they're tied to the exercise ID (e.g. a wrapper that cancels/resets on ID change via `useEffect` cleanup), or (b) using React Router's `key` on the route itself to force full page remount.
- **Bulk teacher feedback publishing**: Teachers often want to draft feedback for multiple students and publish it all at once (e.g. after a grading session). Ideas: (a) a `published_at` timestamp on `teacher_activity` — feedback is only visible to students when `published_at` is set; teachers can set it per-submission or bulk-publish all drafts for an exercise at once. The visible timestamp shown to the student should be `published_at`, not `edited_at`/`merge_window_start`. (b) Alternatively, a course-exercise-level `teacher_assessments_visible_from` timestamp similar to the auto-assessment proposal above. Option (a) is more granular and likely better. The current `assessments_student_visible` boolean does not cover teacher feedback and is not enforced.
